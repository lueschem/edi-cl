config {
    mke2fs = "/sbin/mke2fs"
    e2fsck = "/sbin/e2fsck"
}

image disk-image.img {
    hdimage {
        align = "1M"
        partition-table-type = "gpt"
        fill = "true"
    }

    partition boot {
        offset = "1M"
        partition-type-uuid = "linux"
        image = "boot.ext4"
        bootable = "true"
    }

    partition data {
        partition-type-uuid =  "linux"
        image = "data.ext4"
    }

    partition root {
        partition-type-uuid = "B921B045-1DF0-41C3-AF44-4C6F280D3FAE"
        image = "root.ext4"
    }
}

image boot.ext4 {
    name = "boot"
    ext4 {
        label = "boot"
        use-mke2fs = "true"
    }
    size = "128M"
    mountpoint = "/boot/firmware"
}

image data.ext4 {
    name = "data"
    ext4 {
        label = "data"
        use-mke2fs = "true"
    }
    size = "256M"
    mountpoint = "/data"
}

image root.ext4 {
    name = "root"
    ext4 {
        label = "root"
        use-mke2fs = "true"
    }
    size = "125%"
    mountpoint = "/"
}

